// src/js/data/properties.js
export const properties = [
  {
    id: 1,
    name: "M Terra",
    developer: "Mah Sing Group Berhad",
    location: "Puchong, Selangor",
    tagline: "Affordable luxury in Puchong",
    price: 384000,
    monthlyRent: null,
    type: "Service Residence",
    category: "new",
    listingType: "sale",
    projectStage: "New launch",
    tenure: "Leasehold",
    bedrooms: "2-3",
    bathrooms: "2",
    size: "775-1023",
    monthlyRepayment: 1649,
    completionDate: 2028,
    description: "M Terra in Puchong offers affordable luxury living with modern amenities and excellent connectivity.",
    preview: "/src/assets/images/properties/M-Terra/previews/condo-preview.jpg",
    features: [
      "Strategic location",
      "Modern design",
      "Security system",
      "Quality finishes"
    ],
    facilities: [
      {
        id: "fac-1",
        name: "Overview",
        image: "/src/assets/images/properties/M-Terra/facilities/overview.jpg",
        description: "Property Overview"
      },
      {
        id: "fac-2",
        name: "Swimming Pool",
        image: "/src/assets/images/properties/M-Terra/facilities/swimming-pool.jpg",
        description: "Luxury swimming pool for residents"
      }
    ],
    floorPlans: [
      {
        id: "fp-2",
        type: "Type B",
        size: "850 sqft",
        bedrooms: 3,
        bathrooms: 2,
        image: "/src/assets/images/properties/M-Terra/floor-plans/type-b.png"
      },
      {
        id: "fp-3",
        type: "Type C",
        size: "1023 sqft",
        bedrooms: 3,
        bathrooms: 2,
        image: "/src/assets/images/properties/M-Terra/floor-plans/type-c.png"
      }
    ],
    interior: [
      {
        id: "int-1",
        name: "Bathroom",
        image: "/src/assets/images/properties/M-Terra/interior/bathroom.png",
        description: "Modern bathroom design"
      },
      {
        id: "int-2",
        name: "Kitchen",
        image: "/src/assets/images/properties/M-Terra/interior/kitchen.png",
        description: "Spacious kitchen layout"
      },
      {
        id: "int-3",
        name: "Living Room",
        image: "/src/assets/images/properties/M-Terra/interior/livingroom.png",
        description: "Contemporary living space"
      },
      {
        id: "int-4",
        name: "Master Room",
        image: "/src/assets/images/properties/M-Terra/interior/masterroom.png",
        description: "Comfortable master bedroom"
      },
      {
        id: "int-5",
        name: "Second Room",
        image: "/src/assets/images/properties/M-Terra/interior/secondroom.png",
        description: "Cozy second bedroom"
      }
    ],
    location: {
      image: "/src/assets/images/properties/M-Terra/location/location.jpg",
      description: "Strategic location in Puchong"
    },
    additionalInfo: {
      totalUnits: 999,
      listingId: "39715937",
      propertyType: "Service Residence For Sale"
    }
  },
  {
    id: 2,
    name: "Sanderling Lakefront",
    developer: "MCT Berhad",
    location: "Cyberjaya, Selangor",
    tagline: "Mystery Packages New Launch Promotion, RM500 to Own, Free Furniture",
    price: 450000,
    monthlyRent: null,
    type: "Condominium",
    category: "new",
    listingType: "sale",
    projectStage: "New launch",
    tenure: "Freehold",
    bedrooms: "3-4",
    bathrooms: "2",
    size: "958-1324 sqft",
    monthlyRepayment: 2020,
    completionDate: 2025,
    description: "Sanderling Lakefront in Cyberjaya offers spacious units with modern amenities, excellent connectivity, and a promotional package for early buyers.",
    preview: "/src/assets/images/properties/Sanderling/previews/condo-preview.jpg",
    features: [
      "RM500 Booking Fee Only",
      "Free S&P Legal & Loan Agreement Fees",
      "Free 2 Car Park",
      "Free Kitchen Cabinet"
    ],
    facilities: [
      {
        id: "fac-1",
        name: "Gym",
        image: "/src/assets/images/properties/Sanderling/facilities/gym.jpg",
        description: "Modern gymnasium equipped with latest fitness equipment"
      },
      {
        id: "fac-2",
        name: "Jogging Track",
        image: "/src/assets/images/properties/Sanderling/facilities/jogging-track.jpg",
        description: "Dedicated jogging track for residents"
      },
      {
        id: "fac-3",
        name: "Maze Garden",
        image: "/src/assets/images/properties/Sanderling/facilities/maze-garden.jpg",
        description: "Beautiful maze garden for relaxation"
      },
      {
        id: "fac-4",
        name: "Sky Swimming Pool",
        image: "/src/assets/images/properties/Sanderling/facilities/sky-swimming-pool.jpeg",
        description: "Luxurious sky pool with panoramic views"
      }
    ],
    floorPlans: [
      {
        id: "fp-1",
        type: "Type A",
        size: "958 sqft",
        bedrooms: 3,
        bathrooms: 2,
        image: "/src/assets/images/properties/Sanderling/floor-plans/type-a.png"
      },
      {
        id: "fp-2",
        type: "Type B",
        size: "1711 sqft",
        bedrooms: 4,
        bathrooms: 2,
        image: "/src/assets/images/properties/Sanderling/floor-plans/type-b.jpg"
      }
    ],
    interior: [
      {
        id: "int-1",
        name: "Balcony",
        image: "/src/assets/images/properties/Sanderling/interior/balcony.jpg",
        description: "Spacious balcony with scenic views"
      },
      {
        id: "int-2",
        name: "Kitchen Area",
        image: "/src/assets/images/properties/Sanderling/interior/kitchen-area.jpg",
        description: "Modern kitchen with premium finishes"
      },
      {
        id: "int-3",
        name: "Living Room",
        image: "/src/assets/images/properties/Sanderling/interior/living-room.jpeg",
        description: "Contemporary living space design"
      },
      {
        id: "int-4",
        name: "Master Studio Room",
        image: "/src/assets/images/properties/Sanderling/interior/master-studio-room.jpg",
        description: "Luxurious master bedroom"
      },
      {
        id: "int-5",
        name: "Second Room",
        image: "/src/assets/images/properties/Sanderling/interior/second-room.jpg",
        description: "Comfortable second bedroom"
      },
      {
        id: "int-6",
        name: "Small Room",
        image: "/src/assets/images/properties/Sanderling/interior/small-room.jpg",
        description: "Cozy small bedroom"
      }
    ],
    location: {
      image: "/src/assets/images/properties/Sanderling/location/location.png",
      description: "Strategic location in Cyberjaya"
    },
    additionalInfo: {
      totalUnits: 606,
      listingId: "42475775",
      propertyType: "Condominium For Sale"
    }
  }
];

// 保持筛选函数不变
export const filterProperties = (properties, filters) => {
  const { listingType, propertyCategory, priceRange, propertyType, location } = filters;

  return properties.filter(property => {
    // 1. ListingType (Buy/Rent) 检查
    if (listingType === 'rent' && !property.monthlyRent) {
      return false;
    }
    if (property.listingType !== listingType) {
      return false;
    }

    // 2. New/Subsale 检查
    if (listingType === 'sale' && propertyCategory) {
      if (propertyCategory === 'new' && property.category !== 'new') return false;
      if (propertyCategory === 'subsale' && property.category === 'new') return false;
    }

    // 3. Property Type 检查
    if (propertyType && propertyType !== 'any') {
      switch (propertyType) {
        case 'condo':
          if (!['condominium', 'service residence'].includes(property.type.toLowerCase())) {
            return false;
          }
          break;
        case 'apartment':
          if (!['apartment', 'flat'].includes(property.type.toLowerCase())) {
            return false;
          }
          break;
        case 'terrace':
          if (property.type.toLowerCase() !== 'terrace house') {
            return false;
          }
          break;
        case 'semi-d':
          if (property.type.toLowerCase() !== 'semi-d') {
            return false;
          }
          break;
        case 'bungalow':
          if (property.type.toLowerCase() !== 'bungalow') {
            return false;
          }
          break;
      }
    }

    // 4. Location 检查
    if (location && location !== 'any') {
      const propertyLocation = (typeof property.location === 'string' 
        ? property.location 
        : property.location.description).toLowerCase();
      
      switch (location) {
        case 'selangor':
          if (!['selangor', 'puchong', 'cyberjaya', 'subang', 'petaling'].some(city => 
            propertyLocation.includes(city))) {
            return false;
          }
          break;
        case 'kl':
          if (!['kuala lumpur', 'kl'].some(city => propertyLocation.includes(city))) {
            return false;
          }
          break;
        default:
          if (!propertyLocation.includes(location)) {
            return false;
          }
      }
    }

    // 5. Price Range 检查
    if (priceRange && priceRange !== 'any') {
      if (listingType === 'rent') {
        const rent = property.monthlyRent;
        switch (priceRange) {
          case 'below-1000':
            return rent < 1000;
          case '1000-2000':
            return rent >= 1000 && rent <= 2000;
          case '2000-3000':
            return rent > 2000 && rent <= 3000;
          case '3000-5000':
            return rent > 3000 && rent <= 5000;
          case 'above-5000':
            return rent > 5000;
        }
      } else {
        const price = property.price;
        switch (priceRange) {
          case 'below-500k':
            return price < 500000;
          case '500k-1m':
            return price >= 500000 && price <= 1000000;
          case '1m-2m':
            return price > 1000000 && price <= 2000000;
          case 'above-2m':
            return price > 2000000;
        }
      }
    }

    return true;
  });
};